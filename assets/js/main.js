(()=>{"use strict";const t=.001/60/60/24;window.onload=function(){!function(){if(!document.getElementById("TableOfContents"))return;let t=[];!function(){const e=document.getElementById("TableOfContents");if(e){const t=document.querySelector(".md-content").querySelectorAll("h2, h3");for(let e=0;e<t.length;e++){const n=t[e],a=n.querySelector("a[name]");if(a?n.setAttribute("id",a.name):n.getAttribute("id")||n.setAttribute("id",n.textContent.replace(/[\/\s]/g,"-")),"H2"===n.tagName||"H3"===n.tagName){const t=document.createElement("a");n.appendChild(t),t.setAttribute("href","#"+n.id),t.classList.add("link-icon")}}0===t.length?document.getElementById("NavigationAndMainView").classList.add("-hidetoc"):e.innerHTML=`\n        <ul>\n          ${[...t].map((t=>{const e=$(t).next(".news_date"),n=$(t).clone();return n.children().remove(),`\n            <li class="${t.tagName}">\n              <a href="#${t.id}" data-target="${t.id}">\n                ${n.text()}\n                ${e.length?`<span class="nav_date">${e.text()}</span>`:""}\n              </a>\n            </li>\n            `})).join("")}\n        </ul>\n        `}$("a",e).each(((e,n)=>{t.push({elm:n,target:document.getElementById(n.dataset.target),rect:{y:void 0,height:void 0}})}))}(),$("#TableOfContents a").on("click",(t=>{history.replaceState("","",t.delegateTarget.href);const e=document.getElementById(t.delegateTarget.dataset.target);return e&&$("html").animate({scrollTop:e.offsetTop-16,duration:400}),!1})),$(window).on("resize",(function(){const e=document.querySelector("#MainContentView > .md-content");for(let n=0;n<t.length;n++){const a=t[n];a.rect.y=a.target.offsetTop,a.rect.height=(n<t.length-1?t[n+1].target.offsetTop:e.offsetTop+e.clientHeight)-a.rect.y}n()})).trigger("resize"),$(window).on("scroll",n).trigger("scroll");const e=window.location.hash.substr(1);if(e){const n=decodeURIComponent(e),a=t.filter((t=>t.target.id===n));a.length>0&&$(a[0].elm).trigger("click")}function n(){const e=window.scrollY;for(let n=0;n<t.length;n++){const o=t[n];a({y:e,height:window.innerHeight},o.rect).height>0?o.elm.classList.add("current"):o.elm.classList.remove("current")}}function a(t,e){const n=Math.max(t.y,e.y),a=Math.min(t.y+t.height,e.y+e.height)-n;return a>0?{y:n,height:a}:{y:0,height:0}}}(),$(".toggle-content-btn").on("click",(function(){$(this).next(".accordion-content").slideToggle(500),$(this).toggleClass("active")})),$(".close-content-btn").click((function(){$(this).parent().parent().slideToggle(500),$(this).parent().parent().prev().removeClass("active")})),function(){const t=document.querySelector(".appearance-switch");if(t){const e=t.querySelectorAll(".button");e.forEach((n=>{n.addEventListener("click",(n=>{t.parentNode.dataset.appearanceType=n.target.dataset.appearanceValue,e.forEach((t=>{t===n.target?t.classList.add("-current"):t.classList.remove("-current")}))}))}))}}(),function(){const e=document.querySelector(".tagging-list-view");if(e){let a;const o={},c={},s=document.querySelector(".facet-search"),r=document.createElement("div");function n(){if(o.count){for(const t in c)c[t].forEach((e=>{-1===o[t].indexOf(e.dataset.tag)?e.classList.add("-disable"):e.classList.remove("-disable")}));const t=o.concatenated;for(const e of a){let n=!1;for(const a of t)if(-1===e.ddbj_facetsearch_tags.indexOf(a)){n=!0;break}n?e.classList.add("-hidden"):e.classList.remove("-hidden")}}else{for(const t in c)c[t].forEach((t=>t.classList.add("-disable")));a.forEach((t=>t.classList.remove("-hidden")))}}r.classList.add("spdisplayswitchbutton"),r.textContent="Filters",s.prepend(r),r.addEventListener("click",(t=>{console.log(t),s.classList.toggle("-shown")})),Object.defineProperties(o,{concatenated:{get(){return Object.keys(this).reduce(((t,e)=>t.concat(this[e])),[])}},count:{get(){return Object.keys(this).reduce(((t,e)=>t+this[e].length),0)}}}),a=e.querySelectorAll(".taggingitem"),a.forEach((t=>{t.ddbj_facetsearch_tags=t.dataset.tags.split(",").filter((t=>""!==t))})),function(){if("date"===e.dataset.sortBy){const e=parseInt(new Date("2100-1-1").getTime()*t);a.forEach((n=>{const a=n.querySelector(":scope > .upper > .tag-list-view > .date > time");n.style.order=e-parseInt(new Date(a.getAttribute("datetime")).getTime()*t)}))}}(),function(){const t={},n={},o={};for(const e of a){const a=e.querySelectorAll(".tag-list-view > .tag-view");for(const c of a){let a;a=c.classList.contains("-reverse")?n:t,a[c.dataset.tag]||(a[c.dataset.tag]=[],o[c.dataset.tag]=c.textContent),a[c.dataset.tag].push(e)}}let c="";const r=s.querySelector(':scope .tags[data-tab="tag"]');for(const e of[t,n])for(const t in e)c+=`<li class="tag-view${void 0===n[t]?"":" -reverse"}" data-tag="${t}"><span class="label">${o[t]}</span><span class="count">${e[t].length}</span></li>`;r.innerHTML=c,e.querySelectorAll(".bottom.-collapsed").forEach((t=>{t.querySelector(".collapsedbutton").addEventListener("click",(()=>{t.classList.toggle("-opened")}))}))}(),function(){if("true"===s.dataset.facetSearchYear){const t={};for(const e of a){const n=parseInt(e.dataset.year);t[n]||(t[n]=[]),t[n].push(e)}let e="";const n=s.querySelector(':scope .tags[data-tab="year"]');for(const n of Object.keys(t).sort().reverse())e+=`<li class="tag-view" data-tag="${n}"><span class="label">${n}</span><span class="count">${t[n].length}</span></li>`;n.innerHTML=e}}(),function(){const t=$.deparam(window.location.search.substr(1)),e=window.location.origin+window.location.pathname;Object.keys(t).forEach((e=>o[e]=t[e].split(","))),s.querySelectorAll(":scope .tags").forEach((t=>{const a=t.dataset.tab;void 0===o[a]&&(o[a]=[]),c[a]=t.querySelectorAll(".tag-view"),c[a].forEach((t=>t.addEventListener("click",(()=>{const c=t.dataset.tag;-1===o[a].indexOf(c)?"year"===a?o[a]=[c]:o[a].push(c):o[a].splice(o[a].indexOf(c),1);const s=Object.keys(o).filter((t=>o[t].length>0)).map((t=>`${t}=${o[t].map((t=>t))}`)).join("&");window.history.pushState(o,"",`${e}${o.count?`?${s}`:""}`),n()}))))})),n()}(),function(){const t=s.querySelector(":scope > .tab-menu-view");if(t){const e=t.querySelectorAll(":scope > .tabmenucontainer > li"),n=t.querySelectorAll(":scope > .tabbedcontent");e.forEach((a=>{a.target=t.querySelector(`:scope > .tabbedcontent[data-tab="${a.dataset.tab}"]`),a.addEventListener("click",(()=>{e.forEach((t=>t.classList.remove("-current"))),a.classList.add("-current"),n.forEach((t=>t.classList.remove("-current"))),a.target.classList.add("-current")}))})),0===o.tag.length&&o.year.length>0&&t.querySelector('li[data-tab="year"]').dispatchEvent(new Event("click"))}}()}}(),$(document).ready((function(){let t;switch($("html").attr("lang")){case"ja":t="閉じる";break;case"en":t="Close"}$(".group1").colorbox({rel:"group1",maxWidth:"90%",maxHeight:"90%",current:"{current} / {total}",opacity:1,close:t,closeButton:!0})}))}})();
//# sourceMappingURL=main.js.map